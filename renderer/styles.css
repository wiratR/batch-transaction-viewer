:root {
  --bg: #0b0f14;
  --panel: #121821;
  --panel-2: #0f1520;
  --text: #cfe3ff;
  --muted: #8fa3bf;
  --accent: #3b82f6;
  --accent-2: #60a5fa;
  --border: #1e2733;
  --gap: 12px;
  --radius: 12px;
  --left-width: 500px;
  --topbar-h: 56px;
  --footer-h: 30px;
  --mono: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
  --ui: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
}

* {
  box-sizing: border-box
}

html,
body {
  height: 100%
}

body {
  margin: 0;
  background: var(--bg);
  color: var(--text);
  font-family: var(--ui);
  display: flex;
  flex-direction: column;
  min-height: 100vh
}

/* Topbar */
.topbar {
  height: var(--topbar-h);
  display: flex;
  align-items: center;
  gap: var(--gap);
  padding: 0 12px;
  border-bottom: 1px solid var(--border);
  background: linear-gradient(180deg, #0e1420 0%, #0b101a 100%)
}

.tabs {
  display: flex;
  gap: 8px
}

.tab {
  background: transparent;
  color: #9bb2d0;
  border: 1px solid transparent;
  padding: 6px 10px;
  border-radius: 999px;
  cursor: pointer;
  transition: 120ms
}

.tab:hover {
  color: #e1eeff;
  background: rgba(96, 165, 250, .08)
}

.tab.active {
  color: #fff;
  border-color: rgba(96, 165, 250, .35);
  background: rgba(59, 130, 246, .18)
}

.topbar .right {
  margin-left: auto;
  display: flex;
  align-items: center;
  gap: 10px;
  min-width: 0
}

.filehint {
  color: var(--muted);
  font-family: var(--mono);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: min(42vw, 580px)
}

/* Pages */
.pages {
  position: relative;
  flex: 1 1 auto;
  min-height: 0
}

.page {
  position: absolute;
  inset: 0;
  overflow: auto;
  padding: 12px
}

.page[hidden] {
  display: none !important
}

/* Page toolbar */
.page-toolbar {
  display: flex;
  align-items: center;
  gap: 8px;
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 8px;
  margin-bottom: 12px;
  position: sticky;
  top: 0;
  z-index: 5
}

.page-toolbar .spacer {
  flex: 1
}

/* Inputs & selects */
#openBtn,
#openDenyBtn,
#exportDenyJson,
#exportDenyCsv {
  background: #182235;
  border: 1px solid var(--border);
  color: #e6f1ff;
  padding: 6px 10px;
  border-radius: 8px;
  cursor: pointer
}

#openBtn:hover,
#openDenyBtn:hover,
#exportDenyJson:hover,
#exportDenyCsv:hover {
  background: #1a2945;
  border-color: #2a3a52
}

#search,
#panSearch,
#filterRemoved,
#filterReason {
  height: 32px;
  border-radius: 8px;
  border: 1px solid var(--border);
  background: #0c1320;
  color: var(--text);
  padding: 0 10px;
  outline: none
}

#search {
  width: 320px;
  max-width: 40vw
}

#panSearch {
  width: 300px;
  max-width: 40vw
}

#filterRemoved {
  width: 140px
}

#filterReason {
  min-width: 200px;
  max-width: 40vw
}

#search::placeholder,
#panSearch::placeholder {
  color: #7f93ac
}

/* XML split */
.split {
  display: grid;
  grid-template-columns: var(--left-width) 1fr;
  gap: var(--gap)
}

.pane.left,
.pane.right {
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: var(--radius)
}

.pane.left {
  overflow: auto;
  padding: 8px;
  min-height: 0
}

.pane.right {
  padding: 12px;
  overflow: auto
}

/* Tree */
ul.tree {
  list-style: none;
  margin: 0;
  padding-left: 10px
}

ul.tree>li {
  margin: 2px 0
}

button.node {
  width: 100%;
  text-align: left;
  background: transparent;
  color: #cfe3ff;
  border: 1px solid transparent;
  border-radius: 6px;
  padding: 4px 6px;
  cursor: pointer
}

button.node:hover {
  background: rgba(96, 165, 250, .08);
  border-color: rgba(96, 165, 250, .18)
}

/* Details */
.detail-header {
  display: flex;
  align-items: baseline;
  gap: 10px;
  margin-bottom: 10px
}

.detail-header h2 {
  margin: 0;
  font-size: 16px;
  color: #eaf2ff
}

.detail-header .path {
  font-family: var(--mono);
  color: #97acc8;
  background: #0e1522;
  border: 1px solid var(--border);
  padding: 2px 6px;
  border-radius: 6px
}

.card {
  background: var(--panel-2);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 10px;
  margin: 10px 0
}

.card h3 {
  margin: 0 0 8px 0;
  font-size: 13px;
  color: #e6f0ff
}

.kv {
  width: 100%;
  border-collapse: collapse
}

.kv td {
  border-top: 1px solid #1a2330;
  padding: 6px 8px;
  vertical-align: top
}

.kv tr:first-child td {
  border-top: 0
}

pre {
  margin: 0;
  font-family: var(--mono);
  white-space: pre-wrap;
  word-break: break-word;
  color: #d8e9ff
}

.placeholder {
  opacity: .8;
  color: var(--muted)
}

/* DenyList table */
.deny-stats {
  font-family: var(--mono);
  color: #b9cce6;
  padding: 6px 2px 10px
}

.deny-table-wrap {
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  overflow: hidden
}

#denyTable {
  width: 100%;
  border-collapse: collapse;
  table-layout: auto
}

#denyTable thead th {
  position: sticky;
  top: 0;
  background: #111827;
  color: #e6f0ff;
  text-align: left;
  padding: 10px;
  border-bottom: 1px solid var(--border);
  font-weight: 600
}

#denyTable tbody td {
  padding: 8px 10px;
  border-top: 1px solid #162031;
  color: #d7e7ff
}

#denyTable .col-pan {
  width: auto
}

#denyTable .col-removed {
  width: 8ch
}

#denyTable .col-reasons {
  width: 26ch
}

#denyTable tbody td:nth-child(1) {
  white-space: normal;
  word-break: break-all;
  font-family: var(--mono)
}

#denyTable tbody td:nth-child(2),
#denyTable tbody td:nth-child(3) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis
}

#denyTable thead th.th-sort {
  cursor: pointer;
  user-select: none
}

#denyTable thead th.th-sort.sort-asc::after {
  content: " ▲";
  opacity: .8
}

#denyTable thead th.th-sort.sort-desc::after {
  content: " ▼";
  opacity: .8
}

#denyTable tbody tr:nth-child(odd) {
  background: rgba(255, 255, 255, .02)
}

/* Footer */
.status {
  height: var(--footer-h);
  display: flex;
  align-items: center;
  padding: 0 12px;
  border-top: 1px solid var(--border);
  color: #8aa0be;
  background: #0d131d;
  font-size: 12px
}

/* Responsive */
@media (max-width:980px) {
  :root {
    --left-width: 240px
  }

  #search {
    width: 220px
  }
}

@media (max-width:760px) {
  :root {
    --left-width: 220px
  }

  .topbar {
    flex-wrap: wrap;
    height: auto;
    padding: 8px
  }

  .tabs {
    order: 1
  }

  .topbar .right {
    order: 2;
    width: 100%
  }

  #search {
    max-width: 100%
  }
}

/* มี error */
.tree .node.has-error {
  border-left: 3px solid #ff6b6b;
  color: #ffb3b3;
}

/* ---- Validation styles ---- */
button.node.error {
  color: #c62828;
  font-weight: 600;
  position: relative;
}

button.node.error::before {
  content: "●";
  font-size: 10px;
  line-height: 1;
  position: absolute;
  left: -12px;
  top: 6px;
}

.card.error {
  border-left: 4px solid #c62828;
  background: #ffebee;
}

.card.error h3 {
  color: #c62828;
  margin: 0 0 6px 0;
}

.card.error ul {
  margin: 0;
  padding-left: 18px;
}

:root {
  --topbar-h: 56px;
  /* ความสูง header บนสุด */
  --pagebar-h: 44px;
  /* ความสูง toolbar ของแต่ละเพจ */
  --footer-h: 24px;
  /* ความสูง footer tips */
}

/* โครงหน้าหลัง header + footer: ไม่ให้สกรอลทั้งหน้าจอ */
.pages {
  height: calc(100vh - var(--topbar-h) - var(--footer-h));
  overflow: hidden;
  /* กันสกรอลภายนอก */
}

/* แต่ละเพจสูงเต็มพื้นที่ที่เหลือ */
.page {
  display: flex;
  flex-direction: column;
  height: 100%;
  min-height: 0;
  /* สำคัญเพื่อให้ลูกสกรอลได้ */
}

/* แถบเครื่องมือด้านบนของเพจ */
.page-toolbar {
  flex: 0 0 var(--pagebar-h);
  display: flex;
  align-items: center;
  gap: .5rem;
  padding: .5rem .75rem;
  border-bottom: 1px solid #e6e6e6;
}

/* พื้นที่ split สองฝั่ง: ให้ตัวมันเองไม่สกรอล แต่ปล่อยให้ลูกสกรอล */
.split {
  flex: 1 1 auto;
  display: grid;
  grid-template-columns: 280px 1fr;
  /* ซ้าย 280px ตามที่เคยขอ */
  gap: 0;
  min-height: 0;
  /* สำคัญ */
}

/* ให้แต่ละ pane สกรอลของตัวเอง -> ขวาจะ “ค้างที่เดิม” */
.pane {
  min-height: 0;
  /* สำคัญ */
  overflow: auto;
}

/* เลย์เอาต์ต้นไม้ฝั่งซ้ายให้สกรอล */
.pane.left {
  border-right: 1px solid #eee;
}

/* ฝั่งขวา “ค้าง” อยู่ตลอด เพราะทั้งหน้าจอไม่สกรอล มีแต่ pane ขวาเองที่สกรอล */
.pane.right {
  background: #0d131d;
  /* ถ้าอยากให้ขวา sticky แม้อยู่ในคอนเทนเนอร์ที่สกรอลเอง:
     position: sticky; top: 0; height: 100%; overflow: auto; */
}

/* ไฮไลต์ปุ่ม node ที่ถูกเลือก */
button.node.selected {
  background: #1e2a3b;
  outline: 1px solid #bcdcff;
}